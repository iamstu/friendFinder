<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
</head>
<body>
  <!-- button to return home -->
  <a href="/"><button class="btn btn-primary">Home</button></a>
    <h1 class="text-center">Tell us about you!</h1>
    <!-- user info -->
    <div class="container">
<h3>Name:</h3>
    <input type="text" class="form-control" id="name">
<h3>Give us a picture of you to show your friends:</h3>
    <input type="text" class="form-control" id="img">
<!-- survey -->
<h4>I can't relax if there is work to be done.</h4>
<div class="form-check form-check-inline">
    <input class="form-check-input q1" type="radio" name="question1" data-question="0" value="1">
    <label class="form-check-label" for="q1-1">1 (strongly disagree)</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q1" type="radio" name="question1" data-question="0" value="2">
    <label class="form-check-label" for="q1-2">2</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q1" type="radio" name="question1" data-question="0" value="3">
    <label class="form-check-label" for="q1-3">3</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q1" type="radio" name="question1" data-question="0" value="4">
    <label class="form-check-label" for="q1-4">4</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q1" type="radio" name="question1" data-question="0" value="5">
    <label class="form-check-label" for="q1-5">5 (strongly agree)</label>
  </div>
<h4>I often try new things.</h4>
<div class="form-check form-check-inline">
    <input class="form-check-input q2" type="radio" name="question2" data-question="1" value="1">
    <label class="form-check-label" for="q1-1">1 (strongly disagree)</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q2" type="radio" name="question2" data-question="1" value="2">
    <label class="form-check-label" for="q1-2">2</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q2" type="radio" name="question2" data-question="1" value="3">
    <label class="form-check-label" for="q1-3">3</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q2" type="radio" name="question2" data-question="1" value="4">
    <label class="form-check-label" for="q1-4">4</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q2" type="radio" name="question2" data-question="1" value="5">
    <label class="form-check-label" for="q1-5">5 (strongly agree)</label>
  </div>
<h4>If a new product comes out I have to get it.</h4>
<div class="form-check form-check-inline">
    <input class="form-check-input q3" type="radio" name="question3" data-question="2" value="1">
    <label class="form-check-label" for="q1-1">1 (strongly disagree)</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q3" type="radio" name="question3" data-question="2" value="2">
    <label class="form-check-label" for="q1-2">2</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q3" type="radio" name="question3" data-question="2" value="3">
    <label class="form-check-label" for="q1-3">3</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q3" type="radio" name="question3" data-question="2" value="4">
    <label class="form-check-label" for="q1-4">4</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q3" type="radio" name="question3" data-question="2" value="5">
    <label class="form-check-label" for="q1-5">5 (strongly agree)</label>
  </div>
<h4>I can go days without speaking to another person.</h4>
<div class="form-check form-check-inline">
    <input class="form-check-input q4" type="radio" name="question4" data-question="3" value="1">
    <label class="form-check-label" for="q1-1">1 (strongly disagree)</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q4" type="radio" name="question4" data-question="3" value="2">
    <label class="form-check-label" for="q1-2">2</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q4" type="radio" name="question4" data-question="3" value="3">
    <label class="form-check-label" for="q1-3">3</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q4" type="radio" name="question4" data-question="3" value="4">
    <label class="form-check-label" for="q1-4">4</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q4" type="radio" name="question4" data-question="3" value="5">
    <label class="form-check-label" for="q1-5">5 (strongly agree)</label>
  </div>
<h4>I rarly pass up a chance to meet with friends.</h4>
<div class="form-check form-check-inline">
    <input class="form-check-input q5" type="radio" name="question5" data-question="4" value="1">
    <label class="form-check-label" for="q1-1">1 (strongly disagree)</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q5" type="radio" name="question5" data-question="4" value="2">
    <label class="form-check-label" for="q1-2">2</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q5" type="radio" name="question5" data-question="4" value="3">
    <label class="form-check-label" for="q1-3">3</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q5" type="radio" name="question5" data-question="4" value="4">
    <label class="form-check-label" for="q1-4">4</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q5" type="radio" name="question5" data-question="4" value="5">
    <label class="form-check-label" for="q1-5">5 (strongly agree)</label>
  </div>
<h4>When I go new places I usually have fun exploring them.</h4>
<div class="form-check form-check-inline">
    <input class="form-check-input q6" type="radio" name="question6" data-question="5" value="1">
    <label class="form-check-label" for="q1-1">1 (strongly disagree)</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q6" type="radio" name="question6" data-question="5" value="2">
    <label class="form-check-label" for="q1-2">2</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q6" type="radio" name="question6" data-question="5" value="3">
    <label class="form-check-label" for="q1-3">3</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q6" type="radio" name="question6" data-question="5" value="4">
    <label class="form-check-label" for="q1-4">4</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q6" type="radio" name="question6" data-question="5" value="5">
    <label class="form-check-label" for="q1-5">5 (strongly agree)</label>
  </div>
<h4>I don't make plans.</h4>
<div class="form-check form-check-inline">
    <input class="form-check-input q7" type="radio" name="question7" data-question="6" value="1">
    <label class="form-check-label" for="q1-1">1 (strongly disagree)</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q7" type="radio" name="question7" data-question="6" value="2">
    <label class="form-check-label" for="q1-2">2</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q7" type="radio" name="question7" data-question="6" value="3">
    <label class="form-check-label" for="q1-3">3</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q7" type="radio" name="question7" data-question="6" value="4">
    <label class="form-check-label" for="q1-4">4</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q7" type="radio" name="question7" data-question="6" value="5">
    <label class="form-check-label" for="q1-5">5 (strongly agree)</label>
  </div>
<h4>It is better to wait until a plan is formed to act.</h4>
<div class="form-check form-check-inline">
    <input class="form-check-input q8" type="radio" name="question8" data-question="7" value="1">
    <label class="form-check-label" for="q1-1">1 (strongly disagree)</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q8" type="radio" name="question8" data-question="7" value="2">
    <label class="form-check-label" for="q1-2">2</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q8" type="radio" name="question8" data-question="7" value="3">
    <label class="form-check-label" for="q1-3">3</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q8" type="radio" name="question8" data-question="7" value="4">
    <label class="form-check-label" for="q1-4">4</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q8" type="radio" name="question8" data-question="7" value="5">
    <label class="form-check-label" for="q1-5">5 (strongly agree)</label>
  </div>
<h4>I often find myself rushing to keep obligations.</h4>
<div class="form-check form-check-inline">
    <input class="form-check-input q9" type="radio" name="question9" data-question="8" value="1">
    <label class="form-check-label" for="q1-1">1 (strongly disagree)</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q9" type="radio" name="question9" data-question="8" value="2">
    <label class="form-check-label" for="q1-2">2</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q9" type="radio" name="question9" data-question="8" value="3">
    <label class="form-check-label" for="q1-3">3</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q9" type="radio" name="question9" data-question="8" value="4">
    <label class="form-check-label" for="q1-4">4</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q9" type="radio" name="question9" data-question="8" value="5">
    <label class="form-check-label" for="q1-5">5 (strongly agree)</label>
  </div>
<h4>I usually enjoy debating ideas.</h4>
<div class="form-check form-check-inline">
    <input class="form-check-input q10" type="radio" name="question10" data-question="9" value="1">
    <label class="form-check-label" for="q1-1">1 (strongly disagree)</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q10" type="radio" name="question10" data-question="9" value="2">
    <label class="form-check-label" for="q1-2">2</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q10" type="radio" name="question10" data-question="9" value="3">
    <label class="form-check-label" for="q1-3">3</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q10" type="radio" name="question10" data-question="9" value="4">
    <label class="form-check-label" for="q1-4">4</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input q10" type="radio" name="question10" data-question="9" value="5">
    <label class="form-check-label" for="q1-5">5 (strongly agree)</label>
  </div>
<br>
<br>
<!-- submit button -->
  <button type="submit" class="btn btn-primary" id="submit" >Submit</button>
</div>
<br><br><br>
<!-- link to api -->
  <a href="/api/friends">Friends Api</a>
<!-- modal for no name or img data -->
  <div class="modal" tabindex="-1" role="dialog" id="modal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Missing Information</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Please make sure the name and image fields are complete.</p>
        </div>
      </div>
    </div>
  </div>
<!-- modal for unfinished quiz -->
  <div class="modal" tabindex="-1" role="dialog" id="quizModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Unanswered Questions</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Some questions of the quiz remain un answered. Please answer them for the most accurate match.</p>
        </div>
      </div>
    </div>
  </div>
<!-- modal for response -->
  <div class="modal" tabindex="-1" role="dialog" id="resModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Match:</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p id="matchName"></p>
          <br>
          <p id="matchImg"></p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // array for user data
  var survey= [0,0,0,0,0,0,0,0,0,0];

    // click function to capture each question choice value and put in array
  $("[type=radio]").on("click", function(){
    var chosenVal = parseInt($(this).attr("value"));
    survey[$(this).attr("data-question")] = chosenVal;
  })
    // submit click function
  $("#submit").click(function(event){
      event.preventDefault();
      // check to see if name and img have been entered and capture data
    if ($("#name").val().trim() != "" && $("#img").val().trim() != 0){
        var valid = true;
        var name = ($("#name").val());
        var img = $("#img").val();
      // check that each question has been answered
        for (var i = 0; i < survey.length; i ++){
            if(survey[i] === 0){
                valid = false;
            }
        }
        if (valid){
      // make new user data object
            var newUser = {
                name: name,
                img: img,
                choices: survey
            }
            // post and modal creation
            $.post("/api/friends", newUser).then(function(data) {
                $("#matchName").text(data.name);
                $("#matchImg").text(data.img);
                $("#resModal").modal("show");
            });
        }else{
          // need all questions answered
          $("#quizModal").modal("show");
        }
    }
    else{
        // need valid name or img
        $("#modal").modal("show");
    }

  })
  </script>
</body>
</html>